<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CNum: include/CNum/DataStructs/Memory/Arena.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CNum<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">CPU-optimized ML library for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('Arena_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Arena.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div>
<p><a href="Arena_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:linked_5Flist_5Fnode" id="r_linked_5Flist_5Fnode"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlinked__list__node.html">linked_list_node</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A node in a linked list.  <a href="structlinked__list__node.html#details">More...</a><br /></td></tr>
<tr class="memitem:arena" id="r_arena"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarena.html">arena</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread local mini "heap" used for thread local memory allocation.  <a href="structarena.html#details">More...</a><br /></td></tr>
<tr class="memitem:arena_5Fview" id="r_arena_5Fview"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarena__view.html">arena_view</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A view of memory that was allocated in an arena.  <a href="structarena__view.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a76542edd965392f01c15551b1efd1d77" id="r_a76542edd965392f01c15551b1efd1d77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a76542edd965392f01c15551b1efd1d77">ARENA_BLOCK_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:a76542edd965392f01c15551b1efd1d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">The block size of the arena.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6511b561eba6017d3f09e9ef44b6b500" id="r_a6511b561eba6017d3f09e9ef44b6b500"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structarena.html">arena</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a></td></tr>
<tr class="memitem:aae12f4ba9d11b02971a79a8bbcec30a3" id="r_aae12f4ba9d11b02971a79a8bbcec30a3"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structarena__view.html">arena_view</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab47cb524f0957d4208ca0e75a0d8da6f" id="r_ab47cb524f0957d4208ca0e75a0d8da6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab47cb524f0957d4208ca0e75a0d8da6f">arena_init</a> (uint32_t blocks_to_allocate)</td></tr>
<tr class="memdesc:ab47cb524f0957d4208ca0e75a0d8da6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Arena.  <br /></td></tr>
<tr class="memitem:a9274f6312562c7763cf8f2c81006e4c4" id="r_a9274f6312562c7763cf8f2c81006e4c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9274f6312562c7763cf8f2c81006e4c4">arena_malloc</a> (<a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *<a class="el" href="structarena.html">arena</a>, size_t bytes, size_t type_size)</td></tr>
<tr class="memdesc:a9274f6312562c7763cf8f2c81006e4c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arena manual allocation with malloc fallback.  <br /></td></tr>
<tr class="memitem:a9cc1574545980a9ac976f243427e6818" id="r_a9cc1574545980a9ac976f243427e6818"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9cc1574545980a9ac976f243427e6818">arena_view_reset</a> (<a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a> <a class="el" href="structarena__view.html">arena_view</a>)</td></tr>
<tr class="memdesc:a9cc1574545980a9ac976f243427e6818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory associated with an <a class="el" href="structarena__view.html" title="A view of memory that was allocated in an arena.">arena_view</a> (within the arena itself).  <br /></td></tr>
<tr class="memitem:a799e2913993e8cf548f632945b0ce10d" id="r_a799e2913993e8cf548f632945b0ce10d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a799e2913993e8cf548f632945b0ce10d">arena_clear</a> (<a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *<a class="el" href="structarena.html">arena</a>)</td></tr>
<tr class="memdesc:a799e2913993e8cf548f632945b0ce10d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zero out an arena's memory.  <br /></td></tr>
<tr class="memitem:a61aa127bcb51f54bfc27caa8042f3533" id="r_a61aa127bcb51f54bfc27caa8042f3533"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61aa127bcb51f54bfc27caa8042f3533">arena_free</a> (<a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *<a class="el" href="structarena.html">arena</a>)</td></tr>
<tr class="memdesc:a61aa127bcb51f54bfc27caa8042f3533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all memory associated with an arena.  <br /></td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="a76542edd965392f01c15551b1efd1d77" name="a76542edd965392f01c15551b1efd1d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76542edd965392f01c15551b1efd1d77">&#9670;&#160;</a></span>ARENA_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARENA_BLOCK_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The block size of the arena. </p>
<p>Used for detirmining padding of allocated memory. It is best to keep this the size of a cache line generally </p>

</div>
</div>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="a6511b561eba6017d3f09e9ef44b6b500" name="a6511b561eba6017d3f09e9ef44b6b500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6511b561eba6017d3f09e9ef44b6b500">&#9670;&#160;</a></span>arena_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structarena.html">arena</a> <a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aae12f4ba9d11b02971a79a8bbcec30a3" name="aae12f4ba9d11b02971a79a8bbcec30a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae12f4ba9d11b02971a79a8bbcec30a3">&#9670;&#160;</a></span>arena_view_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structarena__view.html">arena_view</a> <a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a799e2913993e8cf548f632945b0ce10d" name="a799e2913993e8cf548f632945b0ce10d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799e2913993e8cf548f632945b0ce10d">&#9670;&#160;</a></span>arena_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *</td>          <td class="paramname"><span class="paramname"><em>arena</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zero out an arena's memory. </p>
<p>This function does not use memset on the entire range of the arena's memory, but rather zeros the memory up to the internal pointer that keeps track of where the in the arena's memory the next allocation would take place. As this arena's implementation is intentionally simple, allocations are linear, so the memory behind this pointer is all of the previously allocated blocks. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to an arena </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61aa127bcb51f54bfc27caa8042f3533" name="a61aa127bcb51f54bfc27caa8042f3533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61aa127bcb51f54bfc27caa8042f3533">&#9670;&#160;</a></span>arena_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *</td>          <td class="paramname"><span class="paramname"><em>arena</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free all memory associated with an arena. </p>

</div>
</div>
<a id="ab47cb524f0957d4208ca0e75a0d8da6f" name="ab47cb524f0957d4208ca0e75a0d8da6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47cb524f0957d4208ca0e75a0d8da6f">&#9670;&#160;</a></span>arena_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> * arena_init </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>blocks_to_allocate</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Arena. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blocks_to_allocate</td><td>The size of the arena in blocks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an arena </dd></dl>

</div>
</div>
<a id="a9274f6312562c7763cf8f2c81006e4c4" name="a9274f6312562c7763cf8f2c81006e4c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9274f6312562c7763cf8f2c81006e4c4">&#9670;&#160;</a></span>arena_malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a> arena_malloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a6511b561eba6017d3f09e9ef44b6b500">arena_t</a> *</td>          <td class="paramname"><span class="paramname"><em>arena</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>type_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arena manual allocation with malloc fallback. </p>
<p>This function attempts to allocated memory in the heap and return a view that memory, but in the case that the arena is out of space will fall back on the standard malloc, but still return an <a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arena</td><td>Pointer to an arena </td></tr>
    <tr><td class="paramname">bytes</td><td>The number of bytes to allocate </td></tr>
    <tr><td class="paramname">type_size</td><td>The size of the data type being stored (for the view) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A view of the allocated memory </dd></dl>

</div>
</div>
<a id="a9cc1574545980a9ac976f243427e6818" name="a9cc1574545980a9ac976f243427e6818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cc1574545980a9ac976f243427e6818">&#9670;&#160;</a></span>arena_view_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_view_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#aae12f4ba9d11b02971a79a8bbcec30a3">arena_view_t</a></td>          <td class="paramname"><span class="paramname"><em>arena_view</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free memory associated with an <a class="el" href="structarena__view.html" title="A view of memory that was allocated in an arena.">arena_view</a> (within the arena itself). </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a href="dir_bb5949e5339ea40820eae3204d4fe51a.html">CNum</a></li><li class="navelem"><a href="dir_7713e58079b401b06d8bcd2ca6c8150f.html">DataStructs</a></li><li class="navelem"><a href="dir_94d0f318ecbff1d93b335b944ba86afb.html">Memory</a></li><li class="navelem"><a href="Arena_8h.html">Arena.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
